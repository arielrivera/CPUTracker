Ok, I'm ready to focus on the Main , or home, section of the page.

The Main/home area or tab interface page has 2 sections a top section and a bottom section , for now lets focus on the top section, the bottom sectio nwe can do later, for now the table in the home are we'll move down a little to make room to the top section which should be as follows:

1- A top section we'll call top topbar where we have the following controls in horizontal form, or inline fashion :

- Mode toggle, a toggle to similar to iOS toggles, to toggle between search mode or input mode.
  Search mode should be default mode when the web app is loaded.
  When toggled to input mode, the app adds records to the database. When in search mode the app searches the database.
- A search box mostly intended to search for a serial number, but also a part number can be searched or a combination of serial number and part number can be ebtered to do a search in the SQLite database. The search box accepts searches for partial serial numbers.
  The search box has to detect whether the user is searching for the following 3 cases:
  I- A serial number, either a full serial or partial serial number, this string can identified if the string does not contain a dash or an underscore. Be mindfull that only alphanumberic characters , undersocre and dash are accepted in the search box.
  II- A part number, this can be identified by a string that contains only a single dash and no underscore.
  III- A special string that contains the serial number and the part number separated by an underscore, here is an example "9KQ5064X20158_100-000000346" , where the first part of the string is the serial number and the second part is the part number. When a special string like this is entered and the focus is lost from the search box the app has to attempt deconstructing the string, leave the serial number part in the search box, try to identify the part number and autoselect it in the part number drop down , if not found

        - A Dropdown where to show all the different part numbers. Should have always a top option and defaulted as "Any". If the toggle is in input mode, and the dropdown is set to "Any" in case it was not set or auto identified, should be set to "100-000000000"; if we're in search mode then when searcing in the database then and the droopdown is ANY then the query should look for any in the part number field.

        - A Search button . This search button changes its legend from "Search" in the default color to "Add" in red color, depending on the mode it's set with the toggle.







        Lets create a function for when the string in the searchbox detects an underscore on the blur event as follows:
        Lets call the function deconstructSearchString()
        If the underscore is detected then we call this new function that will attempt to deconstruct the string and leave the serial number, which is the part to the right of the underscore, in the search box and try to identify the part number, which is to the left of the underscore,  and select it in the dropdown.
        If the part number is not found in the dropwdown then the dropdown should be set to it's default value "Any"


        ---



        =---  SEARCH Mode

            - ENTER or CLICK on the search button
                --if regultar string , call SEARCH TOUTE
                -- if Special string, call deconstructSearchString , deconstructSearchString should call SEARCH ROUTE


       =--  ADD Mode
            - ENTER or CLICK on the ADD button
                -- if regular string, call ADD ROUTE
                -- if Special string, call deconstructSearchString, deconstructSearchString should call ADD ROUTE

        -




        I need to implement pagination in home.html  search results table.
        - The table should show a max of 100 rows per page, and the user should be able to navigate through the pages with a pagination control at the bottom of the table.
        - The table should show the total number of rows found in the search query, and the number of pages.
        - The table should show the current page number and the total number of pages.



         Lets now focus on adding functionality to the search results page in home.html.
        1- I want to be able to edit the fields serial number, part number, datecode,country and result  in the search results table.
        If I double click on any of these 5 I should get a modal with a form to edit these 5 field at teh same time.
            --Serial number should be an input box to type manually , it should only accept alphanumeric characters.
            --Part number shuld be the exact same dropdown as in the search form.
            --datecode should be an input box to type manually but implement something where as the user types it suggests other datecodes in the database that match the string typed so far, based in the distinct datecode field in the units table.
            --Country should be a dropdown with these countries: Malaysia, China, USA.
            --Result should be a dropdown with these options: Pass (NFF), Fail (VF), Scrap (VM/PPS), Unknown.
        2- There should be a button to save the changes in the modal form, and a button to cancel the changes.
            -- When the save button is clicked we need to show a spinner while the changes are being saved to the database, and then show a message that the changes were saved successfully if so.
            -- If the changes were not saved successfully we need to show a message that the changes were not saved and why. For example, the serial number field has unique constraint so we should catch any failures like that and warn the user if so happens or any other errors.
            -- When the cancel button is clicked we need to close the modal and not save any changes but warn the user, if there are unsaved changes, that the changes were not saved.
            -- When the modal is closed we need to warn the user if there are unsaved changes that the changes were not saved.
        3- There should be a button "Show test logs" that when clicked shows a separate modal with a table of the test logs telated to the LOGS table but will define this later, we'll come back to this later.
            The table should show the html table taht we'll define later.
            The table should have a button to close the modal.


            ------------

The LOGS section interface page works as follows:
1- This is to control a process that runs in the background. The user can launch and stop the process at will , tHe user should have the option to run the process in two ways, "All files" or "New files only" which is default. WHen the process is started we should show a spinner to the user to wait for the process to finish. THe process should provide detailed output of its progresss as it runs, start, reading which file, etc. because we will be showing this in an area of the LOGS sextion.

        THe python process has this functionality:
            The process has to have features so that is not run multiple times, only once at a time.
            The process checks for the mounted "LOGS FOLDER" to access  compressed files with 7z commpression.

            THe process , in "New files only" mode, checks for the latest modified file ".7z" , grabs the name of it ignoring the extension and the dot before de extension, so it only grabs the name of the file without extension and the dot. If the filename does not exist in teh database then it adds a record in the LOGs table for it. THen it continues for the next file in descending order until it finds a file that is already in the table so then the process is stopped.

            The process, in the "All files" mode, does the same but for all of the ".7z" files in the folder until is finished or stopped byt the user. But in this mode the program shouold list all the LOGS FODLER files and load that list in an array ,all the filenames and created time  , then do the process iterating the array instead of checking each file at a time.

            This python process, regardless of in which mode is running, when it finds a new file that can be added to the database, then also stores a record in the AUDIT table for the serial_number that belongs to the file.
            Here is a sample name for these compressed files : "100-000000334_9KC4399M10022_000000_AMD-HC-OSV-A003_LRV_20231020_104543.7z"

            This process, when it has a file that can be added, will deal with the compressed .7z files as follows:
                - create a temp folder if not already created by the process already.
                - copy the file to the temp folder
                - make sure the original compressed file is not affected in any way.
                - Analyze the newly copied file name as follows to determine if its valid and we can obtain the serial number from it as follows:
                    I- Make sure the file name starts with a pattern as "XXX-XXXXXXXXX_*_" where the X represent any character, and the * represents anything but not a null string, what we're looking for is the serial number and it should be contained in between the first two underscores of the file name where we're using the * as pattern. If not a valid file then delete this temp file from the temp folder and move on to the next file.
                    II- Store the extracted serial number string in a variable, show it in the process output.

                If we know the file is valid and we have succsessfully extracted the serial number then :
                    - unzip the file to a subfolder inside to the temp folder
                    - among the uncompressed files in the new subfolder it should search for two files:
                        1- a file called "Host_Status.txt". If found, read the text contents of it to a variable to store in the database.
                        2- a csv file with a name which starts with the serial number followed by an underscore and more charactes after the underscore. If found we store the name of this file and also the contents of this file , since its a csv we need to store the data in a serialized manner to to then store it in the database.
                    - Store the data we have collected to the database, serialnumber , and if available host_status and csv_file_name and csv_file_content to the LOGS database.
                    - delete the files in the sub folder
                    - delete the sub folder
                    - continiue to next file
                    - remember to always show progress for each step as it goes


                - If not more files to process then delete the  temp folder

I want to change approach, I want all the routes and processes that deal with the LOGS section, like the routes and functions in the section "# --------- LOGS AREA START" to write output to the AUDIT table with "audit_type" field = "7zlogfiles" , so we need to create a function to write to the AUDIT table that can be accessed by routes and other functions. ANd then we will need to change the LOGS section template to show the data from the AUDIT table where "audit_type" field = "7zlogfiles" and todays date in "date_time" field ; So also, a route in app.py called "read_audit" needs to be created that accepts the field "audit_type" value to return records from the AUDIT table. Any questions ?

in home.html template edit modal, lets get the modal to be fully responsive using bootstraps functionality, lets make the labels be in-line with the controls instead of showing up on top of the controls, unless we're on a mobile device on which the labels should then be on top of the control

In the login template, we need to use bootstrap styles whe nshowing the "invalid credentials" message, right now it only shows a blank page with that text, and no button or link to go back and try again or something similar, please suggest solutions

I need to add a red button to the edit modal, pulled to the left, that says "Delete record" that when clicked it will alert the user with a warning that it will delete the record from the database and that it is irreversible, if th euser presses cancel then we return the user to the modal , if the user presses ok button then we call the /delete_record route , which we also need to create, then we wait for the response from the route and if successful then we clear out the modal controls from its body and and only show the alert saying that the record was removed,and also remove the "delete record" and "save changes" button leaving only the "dismiss" button.

I want to have a checkbox above the search results table, in line with the "show # records" , to the right, that says "show raw failures" , the checkbox status is to be saved in the cookie as "show_raw_failures" , should be read on home.html load .If checked then the column "Raw Failure" is shown, if unchecked then the column "Raw Failure" is hidden.

Also, I want to make the font size in the cells for the "Raw FAilure" column be smaller , using bootstraps' styles.

I need to create a "Reports" tab and area and template where I would have :

1. A top bar "advanced Search"
2. A setion below to show the button options: Foxcon report, Export as CSV , Export as HTML .
3. A section below where the search results will be shown in an html table

Each of the above sections are described below:

1. The topbar "Advanced Search" will have an "advenced search" type section where I could select the following Search options
   -- Date or date range selection control.
   -- Part number, should show the same part number dropdown as in home.html template, except the Add part number option; if not specified let it be any so the select search in the route call does not include the field.
   -- Result, it should show the same result dropdown as in home's edit modal for part number; if not specified let it be any so the select search in the route call does not include the field.
   --Date code, if not specified let it be any so the select search in the route call does not include the field.
   -- Raw Failure contains, which should make the route perform a "LIKE keyword%" SQL query on this field, if not specified let it be any so the select search in the route call does not include the field.
   -- A button to submit the search.

2. This section or div will show the options Foxcon report, Export as CSV , Export as HTML as mentioned, and should only be shown after the submit button is pressed

3. This will be where the results of the search will be shown an will be the same html table type as home's search results table but will have no functionality as clicks, double clicks etc. It will always show all the records returned by the search route call performed.

Lets create functionality to the "Foxconn report" button as follows:
-When clicked we will hide the column Raw Failure and its cells.
-We changet he column "Date added" name to "Date received".
-We remove all bootstrap's row class stlyes for coloring like table-success, table-danger etc., in all rows of the table
-We will iterate through the column Result checking it's value and proceeding as follows:
-- If the value of the cell is VM/PPS then we change the value to "Scrap / Power Plain Short"
-- If the value of the cell is NFF or VF then we change the value of the cell to "Return to AMD"
-- If the value of the cell is Unknown, TESTING or anything else then we change the cell value to "Not tested" yet.

Then we attempt to copy the whole results table to memory buffer so the user can paste it anywhere and notify the user if we were successful in copying the date to memory or not. Use the reports-alert-message div to show the success result or alert for failure respectively. This alert should be wiped and disapear after 5 secs
